local versi = "9 totem test - V3.4.2" -- REMOVE GRAPHIC TWEAK
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local root = character:WaitForChild("HumanoidRootPart")

local gui = player:WaitForChild("PlayerGui")
local Net =
    ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild(
    "net"
)
local Client = require(ReplicatedStorage.Packages.Replion).Client
local ItemUtility = require(ReplicatedStorage.Shared.ItemUtility)
local TierUtility = require(ReplicatedStorage.Shared.TierUtility)
local Variants = ReplicatedStorage:WaitForChild("Variants")

--ANTI AFK
local virt=game:service'VirtualUser'
game:service'Players'.LocalPlayer.Idled:connect(function()
    virt:CaptureController()virt:ClickButton2(Vector2.new())
end)

local dump_inventory = false
local trade_stop = false
local running = true
local start_timer = false
local startscript = tick()
local printer = "List Transaksi: "
local set_harga = "50000"
local fav_item = 283
local evolved_uuid = ""
local evolved_jumlah = 0

local stone_uuid = ""
local stone_jumlah = 0
-- ScreenGui utama
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CollectorUI"
screenGui.Parent = gui
local selectedPlayer = nil

-- Frame utama (putih)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 600, 0, 400)
mainFrame.Position = UDim2.new(0, 10, 0, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- === KIRI : PLAYER LIST ===
local playerFrame = Instance.new("Frame")
playerFrame.Size = UDim2.new(0.35, 0, 1, -10)
playerFrame.Position = UDim2.new(0, 5, 0, 5)
playerFrame.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
playerFrame.Parent = mainFrame


-- Tombol Close
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 25, 0, 25)
closeBtn.Position = UDim2.new(1, -30, 0, 5)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.new(0, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(194, 62, 62)
closeBtn.Parent = playerFrame

local showBtn = Instance.new("TextButton")
showBtn.Size = UDim2.new(0, 50, 0, 25)
showBtn.Position = UDim2.new(1, -80, 0, 5)
showBtn.Text = "SHOW"
showBtn.TextColor3 = Color3.new(0, 0, 0)
showBtn.BackgroundColor3 = Color3.fromRGB(214, 188, 72)
showBtn.Parent = playerFrame

-- Tombol 3d
local renderBtn = Instance.new("TextButton")
renderBtn.Size = UDim2.new(0, 25, 0, 25)
renderBtn.Position = UDim2.new(0, 90, 0, 5)
renderBtn.Text = "3D"
renderBtn.TextColor3 = Color3.new(1,1,1)
renderBtn.BackgroundColor3 = Color3.fromRGB(202, 50, 151)
renderBtn.Parent = playerFrame

closeBtn.MouseButton1Click:Connect(function()
    trade_stop = true
    running = false
	screenGui:Destroy()
end)



local listLabel = Instance.new("TextLabel")
listLabel.Size = UDim2.new(1, 0, 0, 80)
listLabel.BackgroundTransparency = 1
listLabel.Text = "Collector " .. versi
listLabel.TextXAlignment = Enum.TextXAlignment.Left
listLabel.TextColor3 = Color3.new(0, 0, 0)
listLabel.Font = Enum.Font.RobotoMono
listLabel.TextSize = 16
listLabel.Parent = playerFrame

local listScroll = Instance.new("ScrollingFrame")
listScroll.Size = UDim2.new(1, -10, 0.8, 0)
listScroll.Position = UDim2.new(0, 5, 0, 65)
listScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
listScroll.ScrollBarThickness = 6
listScroll.BackgroundTransparency = 0.7
listScroll.Parent = playerFrame

local listLayout = Instance.new("UIListLayout")
listLayout.Padding = UDim.new(0, 5)
listLayout.Parent = listScroll

listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	listScroll.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 10)
end)

-- === KANAN : INFO DAN KONTROL ===
local rightFrame = Instance.new("Frame")
rightFrame.Size = UDim2.new(0.6, 0, 1, -10)
rightFrame.Position = UDim2.new(0.4, 0, 0, 5)
rightFrame.BackgroundTransparency = 1
rightFrame.Parent = mainFrame

-- Statistik info
local statsLabel = Instance.new("TextLabel")
statsLabel.Text = "Statistik Info\n\nNONE"
statsLabel.Size = UDim2.new(1, 0, 0, 80)
statsLabel.Position = UDim2.new(0, 0, 0, 20)
statsLabel.TextXAlignment = Enum.TextXAlignment.Left
statsLabel.BackgroundTransparency = 1
statsLabel.TextColor3 = Color3.new(0,0,0)
statsLabel.Font = Enum.Font.RobotoMono
statsLabel.TextSize = 20
statsLabel.Parent = rightFrame

-- Input jumlah
local amountBox = Instance.new("TextBox")
amountBox.Text = "jumlah"
amountBox.PlaceholderText = ""
amountBox.Size = UDim2.new(0, 60, 0, 25)
amountBox.Position = UDim2.new(0, 100, 0, 120)
amountBox.BackgroundColor3 = Color3.fromRGB(210, 210, 210)
amountBox.TextColor3 = Color3.new(0,0,0)
amountBox.Font = Enum.Font.RobotoMono
amountBox.TextSize = 16
amountBox.Parent = rightFrame

local customId = Instance.new("TextBox")
customId.Text = "id"
customId.PlaceholderText = "fav id"
customId.Size = UDim2.new(0, 50, 0, 25)
customId.Position = UDim2.new(0, 170, 0, 120)
customId.BackgroundColor3 = Color3.fromRGB(210, 210, 210)
customId.TextColor3 = Color3.new(0,0,0)
customId.Font = Enum.Font.RobotoMono
customId.TextSize = 16
customId.Parent = rightFrame

local selectedLabel = Instance.new("TextLabel")
selectedLabel.Text = "Player:"
selectedLabel.Size = UDim2.new(1, 0, 0, 20)
selectedLabel.Position = UDim2.new(0, 0, 0, 310)
selectedLabel.BackgroundTransparency = 1
selectedLabel.TextXAlignment = Enum.TextXAlignment.Left
selectedLabel.TextColor3 = Color3.new(0,0,0)
selectedLabel.Font = Enum.Font.RobotoMono
selectedLabel.TextSize = 18
selectedLabel.Parent = rightFrame

--[[
-- Tombol Trade
local tradeBtn = Instance.new("TextButton")
tradeBtn.Text = "Mythc"
tradeBtn.Size = UDim2.new(0, 50, 0, 25)
tradeBtn.Position = UDim2.new(0, 70, 0, 120)
tradeBtn.BackgroundColor3 = Color3.fromRGB(241, 129, 0)
tradeBtn.TextColor3 = Color3.new(1,1,1)
tradeBtn.Font = Enum.Font.RobotoMono
tradeBtn.TextSize = 16
tradeBtn.Parent = rightFrame

local tradeSecret = Instance.new("TextButton")
tradeSecret.Text = "Tumbal"
tradeSecret.Size = UDim2.new(0, 50, 0, 25)
tradeSecret.Position = UDim2.new(0, 120, 0, 120)
tradeSecret.BackgroundColor3 = Color3.fromRGB(24, 161, 179)
tradeSecret.TextColor3 = Color3.new(1,1,1)
tradeSecret.Font = Enum.Font.RobotoMono
tradeSecret.TextSize = 16
tradeSecret.Parent = rightFrame

local stoneBtn = Instance.new("TextButton")
stoneBtn.Text = "Stone"
stoneBtn.Size = UDim2.new(0, 40, 0, 25)
stoneBtn.Position = UDim2.new(0, 170, 0, 120)
stoneBtn.BackgroundColor3 = Color3.fromRGB(87, 87, 87)
stoneBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
stoneBtn.Font = Enum.Font.RobotoMono
stoneBtn.TextSize = 16
stoneBtn.Parent = rightFrame

--]]

-- === Buat tombol toggle ===
local settingBtn = Instance.new("TextButton")
settingBtn.Text = "Collect: OFF"
settingBtn.Size = UDim2.new(1, 0, 0, 25)
settingBtn.Position = UDim2.new(0, 0, 1, 20) -- di bawah tombol trade / log
settingBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
settingBtn.TextColor3 = Color3.new(1,1,1)
settingBtn.Font = Enum.Font.RobotoMono
settingBtn.TextSize = 16
settingBtn.Parent = playerFrame

local shopBtn = Instance.new("TextButton")
shopBtn.Text = "goto Sell"
shopBtn.Size = UDim2.new(1, 0, 0, 25)
shopBtn.Position = UDim2.new(0, 0, 1, 50) -- di bawah tombol trade / log
shopBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
shopBtn.TextColor3 = Color3.new(1,1,1)
shopBtn.Font = Enum.Font.RobotoMono
shopBtn.TextSize = 16
shopBtn.Parent = playerFrame

local Handshake = Instance.new("TextButton")
Handshake.Text = "Sync"
Handshake.Size = UDim2.new(0, 60, 0, 25)
Handshake.Position = UDim2.new(0, 0, 0, 360) -- di bawah tombol trade / log
Handshake.BackgroundColor3 = Color3.fromRGB(122, 190, 12)
Handshake.TextColor3 = Color3.new(1,1,1)
Handshake.Font = Enum.Font.RobotoMono
Handshake.TextSize = 16
Handshake.Parent = rightFrame

-- Tombol reload
local reloadBtn = Instance.new("TextButton")
reloadBtn.Size = UDim2.new(0, 60, 0, 25)
reloadBtn.Position = UDim2.new(0, 65, 0, 360)
reloadBtn.Text = "SCAN"
reloadBtn.TextColor3 = Color3.new(1,1,1)
reloadBtn.TextSize = 16
reloadBtn.Font = Enum.Font.RobotoMono
reloadBtn.BackgroundColor3 = Color3.fromRGB(0, 89, 255)
reloadBtn.Parent = rightFrame

local dumpBtn = Instance.new("TextButton")
dumpBtn.Text = "List"
dumpBtn.Size = UDim2.new(0, 60, 0, 25)
dumpBtn.Position = UDim2.new(0, 130, 0, 360)-- di bawah tombol trade / log
dumpBtn.BackgroundColor3 = Color3.fromRGB(47, 136, 106)
dumpBtn.TextColor3 = Color3.new(1,1,1)
dumpBtn.Font = Enum.Font.RobotoMono
dumpBtn.TextSize = 16
dumpBtn.Parent = rightFrame

local printBtn = Instance.new("TextButton")
printBtn.Text = "Print"
printBtn.Size = UDim2.new(0, 60, 0, 25)
printBtn.Position = UDim2.new(0, 190, 0, 360)-- di bawah tombol trade / log
printBtn.BackgroundColor3 = Color3.fromRGB(148, 148, 148)
printBtn.TextColor3 = Color3.new(0, 0, 0)
printBtn.Font = Enum.Font.RobotoMono
printBtn.TextSize = 16
printBtn.Parent = rightFrame

local stopBtn = Instance.new("TextButton")
stopBtn.Text = "STOP"
stopBtn.Size = UDim2.new(0, 60, 0, 25)
stopBtn.Position = UDim2.new(0, 250, 0, 360)
stopBtn.BackgroundColor3 = Color3.fromRGB(243, 6, 6)
stopBtn.TextColor3 = Color3.fromRGB(253, 253, 253)
stopBtn.Font = Enum.Font.RobotoMono
stopBtn.TextSize = 16
stopBtn.Parent = rightFrame

local resetBtn = Instance.new("TextButton")
resetBtn.Text = "üßπ"
resetBtn.Size = UDim2.new(0, 30, 0, 25)
resetBtn.Position = UDim2.new(0, 305, 0, 120)
resetBtn.BackgroundColor3 = Color3.fromRGB(172, 172, 172)
resetBtn.TextColor3 = Color3.new(1,1,1)
resetBtn.Font = Enum.Font.RobotoMono
resetBtn.TextSize = 16
resetBtn.Parent = rightFrame

local setharga = Instance.new("TextBox")
setharga.Text = set_harga
setharga.PlaceholderText = ""
setharga.Size = UDim2.new(0, 65, 0, 25)
setharga.Position = UDim2.new(0, 235, 0, 120)
setharga.BackgroundColor3 = Color3.fromRGB(210, 210, 210)
setharga.TextColor3 = Color3.new(0,0,0)
setharga.Font = Enum.Font.RobotoMono
setharga.TextSize = 16
setharga.Parent = rightFrame

-- === LOG FRAME ===
local logFrame = Instance.new("ScrollingFrame")
logFrame.Size = UDim2.new(1, -10, 0, 150)
logFrame.Position = UDim2.new(0, 0, 0, 160)
logFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)

logFrame.ScrollBarThickness = 8
logFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
logFrame.Parent = rightFrame
logFrame.BackgroundTransparency = 0.3
local logLayout = Instance.new("UIListLayout")
logLayout.Parent = logFrame
logLayout.SortOrder = Enum.SortOrder.LayoutOrder

logLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	logFrame.CanvasSize = UDim2.new(0, 0, 0, logLayout.AbsoluteContentSize.Y)
	logFrame.CanvasPosition = Vector2.new(0, logFrame.CanvasSize.Y.Offset)
end)

local detail_harga = Instance.new("TextLabel")
detail_harga.Text = "detail"
detail_harga.Size = UDim2.new(0, 0, 0, 0)
detail_harga.Position = UDim2.new(0, 240, 0, 320)
detail_harga.TextColor3 = Color3.new(0, 0, 0)
detail_harga.Font = Enum.Font.RobotoMono
detail_harga.TextSize = 16
detail_harga.Parent = rightFrame

-- Buat tombol utama (dropdown)
local dropdownButton = Instance.new("TextButton")
dropdownButton.Size = UDim2.new(0, 80, 0, 25)
dropdownButton.Position = UDim2.new(0, 0, 0, 120)
dropdownButton.BackgroundColor3 = Color3.fromRGB(141, 61, 161)
dropdownButton.TextColor3 = Color3.new(1, 1, 1)
dropdownButton.Font = Enum.Font.Roboto
dropdownButton.TextScaled = true
dropdownButton.Text = "MENU"
dropdownButton.Parent = rightFrame

-- Frame isi dropdown
local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(0, 200, 0, 0)
dropdownFrame.Position = UDim2.new(0, 0, 0, 150)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
dropdownFrame.BorderSizePixel = 1
dropdownFrame.Visible = false
dropdownFrame.ClipsDescendants = true
dropdownFrame.Parent = rightFrame

--// ANCHOR OPTION MENU
local options = {
                "Mitik All","Mitik BIG","Mitik Small", "Stone", "EVOLVED", "Laba2",
                "Thin","Frostborn", "Glider", "Scare", "Blob Shark", "CUSTOM ID",
                "INDEX SECRET","MASTER", "collector done","narwhal","Gladiator","PLACE TOTEM",
                "TP TOTEM 1","TP TOTEM 2","TP TOTEM 3","TP TOTEM 4","TP TOTEM 5","TP TOTEM 5",
                "FACE CUSTOM"
            }

local function opsia(x)
    opsi(x)
end

-- pengaturan layout
local maxPerColumn = 6
local optionHeight = 30
local columnWidth = 120

-- hitung total kolom
local numColumns = math.ceil(#options / maxPerColumn)
dropdownFrame.Size = UDim2.new(0, columnWidth * numColumns, 0, 0)

for i, text in ipairs(options) do
    local column = math.floor((i - 1) / maxPerColumn)
    local row = (i - 1) % maxPerColumn

    local option = Instance.new("TextButton")
    option.Size = UDim2.new(0, columnWidth, 0, optionHeight)
    option.Position = UDim2.new(0, column * columnWidth, 0, row * optionHeight)
    option.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    option.TextColor3 = Color3.new(1, 1, 1)
    option.Font = Enum.Font.Roboto
    option.TextScaled = true
    option.Text = text
    option.Parent = dropdownFrame

    -- Hover efek
    option.MouseEnter:Connect(function()
        option.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    end)
    option.MouseLeave:Connect(function()
        option.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    end)

    -- Klik opsi
    option.MouseButton1Click:Connect(function()
        dropdownButton.Text = text .. " ‚ñº"
        dropdownFrame:TweenSize(UDim2.new(0, columnWidth * numColumns, 0, 0), "Out", "Sine", 0.2, true)
        task.delay(0.2, function()
            dropdownFrame.Visible = false
        end)
        opsia(i)
    end)
end

-- Fungsi toggle dropdown
dropdownButton.MouseButton1Click:Connect(function()
    if dropdownFrame.Visible then
        dropdownFrame:TweenSize(UDim2.new(0, columnWidth * numColumns, 0, 0), "Out", "Sine", 0.2, true)
        task.delay(0.2, function()
            dropdownFrame.Visible = false
        end)
    else
        dropdownFrame.Visible = true
        local totalHeight = math.min(#options, maxPerColumn) * optionHeight
        dropdownFrame:TweenSize(UDim2.new(0, columnWidth * numColumns, 0, totalHeight), "Out", "Sine", 0.2, true)
    end
end)

-- === Fungsi pesan Log ===
local function pesan(teks)
	local logLine = Instance.new("TextLabel")
	logLine.Size = UDim2.new(1, 15, 0, 15)
	logLine.BackgroundTransparency = 1
	logLine.Text = tostring(teks)
	logLine.TextSize = 16
	logLine.TextColor3 = Color3.fromRGB(19, 19, 19)
	logLine.Font = Enum.Font.RobotoMono
	logLine.TextXAlignment = Enum.TextXAlignment.Left
	logLine.Parent = logFrame

    resetBtn.MouseButton1Click:Connect(function()
        --simpan_transaksi(0)
        logLine:Destroy()
        detail_harga.Text = "Reset"
        amountBox.Text = ""
    end)
end

local function formatTime(seconds)
    local h = math.floor(seconds / 3600)
    local m = math.floor((seconds % 3600) / 60)
    local s = math.floor(seconds % 60)
    return string.format("%02d:%02d:%02d", h, m, s)
end

local function list_variant(childName)
    local child = Variants:FindFirstChild(childName)
    if not child then
        return nil
    end

    -- Jalankan ModuleScript dan ambil datanya
    local success, data = pcall(require, child)
    if not success then
        warn("Gagal memuat module untuk " .. childName .. ": " .. tostring(data))
        return nil
    end

    return data
end

----------------------------------------------------
---fungsi 
local running_time = "00:00:00"
local renderEnabled = false
local function render()
    renderEnabled = not renderEnabled
    if renderEnabled == true then
        RunService:Set3dRenderingEnabled(false)
    else
        RunService:Set3dRenderingEnabled(true)
    end
end
local auto_collect = nil
-- === SETTING AUTO TRADE ===
local HttpService = game:GetService("HttpService")
local settingsFile = "settings.json"
local settings = { auto_trade = false }
local total_transaksi = nil
-- Load settings dari file
local function loadSettings()
    if isfile and isfile(settingsFile) then
        local data = readfile(settingsFile)
        local decoded = HttpService:JSONDecode(data)
        if decoded then
            settings = decoded
            auto_collect = settings.auto_trade
            total_transaksi = settings.total_transaksi
            if total_transaksi == nil then
                total_transaksi = 0
                detail_harga.Text = "no load"
            end
        end
    else
        pesan("No settings file found, using default.")
    end
end
loadSettings()
-- Simpan settings ke file
local function saveSettings()
    if writefile then
        local data = HttpService:JSONEncode(settings)
        writefile(settingsFile, data)
    else
        pesan("‚ùå writefile() not supported in this environment.")
    end
end

-- === Tambahan fitur: simpan jumlah transaksi ===

-- Fungsi untuk menyimpan jumlah transaksi
local function simpan_transaksi(nilai)
    if type(nilai) ~= "number" then
        pesan("‚ùå Nilai transaksi harus berupa angka!")
        return
    end
    settings.total_transaksi = nilai
    saveSettings()
end

local list_ikan = {}
for _, child in pairs(ReplicatedStorage:WaitForChild("Items"):GetChildren()) do
    if child:IsA("ModuleScript") then
        local success, data = pcall(require, child)
        if success and data.Data.Type == "Fish" then
            list_ikan[data.Data.Id] = {
                harga = data.SellPrice,
                tier = data.Data.Tier,
                nama = data.Data.Name,
                id = data.Data.Id
            }
        end
    end
end

local function round(num, numDecimalPlaces)
	local mult = 10^(numDecimalPlaces or 0)
	return math.floor(num * mult + 0.5) / mult
end
local function konvert_harga(h)
    if h then
        local result
        local kk
        if h < 999 then
            result = tostring(h)
        elseif h < 1000000 then
            kk = h / 1000
            result = tostring(round(kk, 2)) .. " K"
        else
            kk = h / 1000000
            result = tostring(round(kk, 2)) .. " M"
        end
        return result
    end
end

local function get_tier(tier)
    if tier == 6 then 
        return "MYTHIC" 
    elseif tier == 7 then
        return "SECRET"
    end
end

local function teleport(x, y, z)
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        root.CFrame = CFrame.new(Vector3.new(x, y, z))
        print("‚úÖeleported to", x, y, z)
    end
end
local function face(yawDeg)
    if root then
        local pos = root.Position
        local yaw = math.rad(yawDeg) 
        local dir = Vector3.new(math.sin(yaw), 0, math.cos(yaw))
        root.CFrame = CFrame.lookAt(pos, pos + dir)
    end
    task.wait(2)
end
local function getPositionByName(name)
    local plr = Players:FindFirstChild(name)
    if not plr then return nil, "player not found" end

    local char = plr.Character or plr.CharacterAdded:Wait()
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return nil, "HumanoidRootPart not found" end

    return hrp.Position
end
local function attachSmartPlatform()
    -- Buat platform sekali
    local platform = Instance.new("Part")
    platform.Name = "LocalPlatform"
    platform.Size = Vector3.new(6, 0.2, 6)
    platform.Anchored = true
    platform.CanCollide = true
    platform.Transparency = 0.3
    platform.Color = Color3.new(1, 0, 0)
    platform.Parent = workspace

    -- Update posisi hanya ketika karakter bergerak
    local function updatePlatform()
        platform.CFrame = CFrame.new(root.Position.X, root.Position.Y - 3, root.Position.Z)
    end
    updatePlatform()
    root:GetPropertyChangedSignal("Position"):Connect(updatePlatform)
end
player.CharacterAdded:Connect(attachSmartPlatform)
if player.Character then
    attachSmartPlatform()
end
local function SetLowGraphics()
    local Lighting = game:GetService("Lighting")
    local Terrain = workspace:FindFirstChildOfClass("Terrain")
    local MaterialService = game:GetService("MaterialService")
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    Lighting.GlobalShadows = false
    Lighting.Brightness = 1
    Lighting.EnvironmentDiffuseScale = 0
    Lighting.EnvironmentSpecularScale = 0
    for _, effect in ipairs(Lighting:GetChildren()) do
        if effect:IsA("PostEffect") then
            effect.Enabled = false
        end
    end
    if Terrain then
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 1
    end
    MaterialService.Use2022Materials = false
end
--[[
---------------------------------------------------------------------
-- 1. Daftar efek yang akan dihapus
---------------------------------------------------------------------
local effectClasses = {
    ParticleEmitter = true,
    Trail = true,
    Smoke = true,
    Fire = true,
    Sparkles = true,
    Beam = true,
    Highlight = true
}

---------------------------------------------------------------------
-- 2. Fungsi aman untuk membersihkan object
---------------------------------------------------------------------
local function cleanObject(obj)
    pcall(function()

        ---------------------------------------------------------------------
        -- Hapus semua particle / efek
        ---------------------------------------------------------------------
        if effectClasses[obj.ClassName] then
            obj:Destroy()
            return
        end

        ---------------------------------------------------------------------
        -- MeshPart ‚Üí hapus tekstur agar polos
        ---------------------------------------------------------------------
        if obj:IsA("MeshPart") then
            obj.TextureID = ""
        end

        ---------------------------------------------------------------------
        -- Decal, Texture, SurfaceAppearance ‚Üí dihancurkan
        ---------------------------------------------------------------------
        if obj:IsA("Decal") 
        or obj:IsA("Texture") 
        or obj:IsA("SurfaceAppearance") then
            obj:Destroy()
            return
        end

    end)
end

---------------------------------------------------------------------
-- 3. Bersihkan semua object yang sudah ada
---------------------------------------------------------------------
for _, obj in ipairs(workspace:GetDescendants()) do
    cleanObject(obj)
end

---------------------------------------------------------------------
-- 4. Mencegah efek/warnatekstur baru muncul
--    (dipanggil 1 frame setelah instance muncul agar tidak valid-member-error)
---------------------------------------------------------------------
workspace.DescendantAdded:Connect(function(obj)
    task.defer(function()
        cleanObject(obj)
    end)
end)
--]]
local data = Client:WaitReplion("Data")

-- ambil inventory pertama kali
local function getInventory()
    return data:GetExpect({"Inventory"})
end

local list_mitik_big = {}
local list_mitik_small = {}
local list_mitik_all = {}
local list_sekret_all = {}
local list_stone ={}
local list_stone_envolved = {}
local list_totem_luck = {}
local list_totem_mutasi = {}
local list_all = {}
local list_master = {}
local list_fav = {}
local trade_uuid = nil
local trade_id = 163 --vyper fish 
--// ANCHOR update_inventory
local SERVER_URL = "https://hayfishit.dpdns.org/collector_update"
local function collector_done(url)
    task.spawn(function()
        local ok, res = pcall(function()
            return request({Url = url, Method = "GET"})
        end)
        if ok and res then
            print("OK:", res.StatusCode)
            pesan("kirim data berhasil")
        else
            warn("Request error:", res)
        end
    end)
end

local function update_inventory()
     list_mitik_big = {}
     list_mitik_small = {}
     list_mitik_all = {}
    list_totem_mutasi = {}
    list_totem_luck = {}
     list_sekret_all = {}
     list_all = {}
     list_stone = {}
     list_stone_envolved = {}
     list_fav = {}
     list_master = {}
     local total_secret = 0
     local index_secret = 0

     local total_mitik_all = 0
     local total_mitik_big = 0
     local total_mitik_small = 0
     local index_mitik_all = 0
     local index_mitik_big = 0
     local index_mitik_small = 0
     local hitung_master = 0
     local total_mutasi = 0
     local hitung_fav = 0
    local inventory = getInventory()
    for category, items in pairs(inventory) do
        if category == "Totems" then
            for i, item in ipairs(items) do
                if item.Id == 1 then
                    table.insert(list_totem_luck,item.UUID)
                elseif item.Id == 2 then
                    table.insert(list_totem_mutasi,item.UUID)
                end
            end
        end
        if category == "Items" then
            for i, item in ipairs(items) do
                
                local itemData = ItemUtility:GetItemData(item.Id)
                    or ItemUtility:GetBaitData(item.Id)
                    or ItemUtility:GetPotionData(item.Id)

                local tierName = "None"
                if itemData and itemData.Data and itemData.Data.Tier then
                    local tierData = TierUtility:GetTier(itemData.Data.Tier)
                    if tierData and tierData.Name then
                        tierName = string.gsub(tierData.Name, "%s+", "")
                    end
                end
                local berat = item.Metadata and item.Metadata.Weight or 0
                local variant = item.Metadata and item.Metadata.VariantId or nil
                local custom_harga = 0
                local category_harga = ""
                local shiny = ""
                local mutasiName = ""
                local nama_item = itemData.Data.Name
                if itemData.Data.Type == "Enchant Stones" then
                    if item.Id == 10 then
                         stone_uuid = item.UUID
                         stone_jumlah = item.Quantity
                    elseif item.Id == 558 then
                         evolved_uuid = item.UUID
                         evolved_jumlah = item.Quantity
                    end
                end
                if itemData.Data.Type == "Fish" and itemData.SellPrice then
                    if item.Id == trade_id then
                        trade_uuid = tostring(item.UUID)
                    end
                    custom_harga = itemData.SellPrice
                    
                    category_harga = ""
                    if berat > itemData.Weight.Default.Max then
                        category_harga = "*BIG*"
                        local multiplication_big = (berat - itemData.Weight.Default.Max) / (itemData.Weight.Big.Max - itemData.Weight.Default.Max)
                        
                        custom_harga =  custom_harga * ( 1 + multiplication_big)
                    else
                        category_harga = ""
                    end
                    if item.Metadata.Shiny == true then
                        custom_harga = custom_harga + (custom_harga * 1.5)
                        shiny = "*SHINY*"
                    end
                    if variant then
                        local info_variant = list_variant(variant)
                        if info_variant then
                            mutasiName = string.gsub(info_variant.Data.Name, "%s+", "")
                            if item.Metadata.Shiny == true then
                                custom_harga = custom_harga + (custom_harga * info_variant.SellMultiplier * 1.5)
                            else
                                custom_harga = custom_harga + (custom_harga * info_variant.SellMultiplier)
                            end
                        end
                    end

                    if item.Id ~= trade_id then
                        list_master[hitung_master] = {nama = nama_item, id = item.Id, uuid = tostring(item.UUID), harga = custom_harga, berat = tostring(berat),mutasi = variant}
                        hitung_master = hitung_master + 1
                    end
                    
                    if tierName == "SECRET" then
                        if variant ~= nil and variant ~= "Albino" and variant ~= "Ghost" and variant ~= "Stone" and variant ~= "Sandy" and variant ~= "Gold" and variant ~= "Frozen" then
                        
                        else
                            list_all[nama_item] = (list_all[nama_item] or 0) + 1
                        end

                        total_secret = total_secret + custom_harga
                        list_sekret_all[index_secret] = {nama = nama_item, id = item.Id, uuid = tostring(item.UUID), harga = custom_harga, berat = tostring(berat),mutasi = variant}
                        index_secret = index_secret + 1
                    end

                    if tierName == "Mythic" then
                        if variant ~= nil and variant ~= "Albino" and variant ~= "Ghost" and variant ~= "Stone" and variant ~= "Sandy" and variant ~= "Gold" then
                           
                        else
                            total_mitik_all = total_mitik_all + custom_harga
                            list_mitik_all[index_mitik_all] = {nama = nama_item, id = item.Id, uuid = tostring(item.UUID), harga = custom_harga, berat = tostring(berat), mutasi = variant}
                            index_mitik_all = index_mitik_all + 1
                            set_harga = setharga.Text
                            if custom_harga > tonumber(set_harga) then
                                    total_mitik_big = total_mitik_big + custom_harga
                                    list_mitik_big[index_mitik_big] = {nama = nama_item, id = item.Id, uuid = tostring(item.UUID), harga = custom_harga, berat = tostring(berat), mutasi = variant}
                                    index_mitik_big = index_mitik_big + 1
                            else
                                total_mitik_small = total_mitik_small + custom_harga
                                list_mitik_small[index_mitik_small] = {nama = nama_item, id = item.Id, uuid = tostring(item.UUID), harga = custom_harga, berat = tostring(berat), mutasi = variant}
                                index_mitik_small = index_mitik_small + 1
                            end
                        end
                    end
                    if item.Id == fav_item then
                        if variant ~= nil and variant ~= "Albino" and variant ~= "Ghost" and variant ~= "Stone" and variant ~= "Sandy" and variant ~= "Gold" and variant ~= "Frozen" then
                            
                        else
                            if fav_item == 136 and berat > 13000 then
                                pesan("skip frostborn " .. tostring(berat))
                            else
                                list_fav[hitung_fav] = {nama = nama_item, id = item.Id, uuid = tostring(item.UUID), harga = custom_harga, berat = tostring(berat), mutasi = variant}
                                hitung_fav = hitung_fav + 1
                            end
                        end
                    end
                    if variant then
                        total_mutasi = total_mutasi + 1
                    end
                    if dump_inventory == true then
                        local namas = i .. ". " ..mutasiName.."->".. category_harga .." ".. shiny .. nama_item .. " |$ " .. konvert_harga(custom_harga)
                        pesan(namas)
                    end
                end
            end
        end
    end
    local cetak_info = "Secret : ".. konvert_harga(total_secret) .. " | " .. index_secret .. " \n"
    .. "Mitik All: ".. konvert_harga(total_mitik_all) .." | " .. index_mitik_all .. " \n"
    .. "Mitik Big: ".. konvert_harga(total_mitik_big) .." | " .. index_mitik_big .. " \n"
    .. "Mitik Small: ".. konvert_harga(total_mitik_small) .." | " .. index_mitik_small .. " \n"
    .. "Mutasi: " .. total_mutasi .. " \n"
    .. "Stone : " .. tostring(stone_jumlah) .. " | Envolved: " .. tostring(evolved_jumlah)
    statsLabel.Text = cetak_info
end

--//ANCHOR shandshake
local function send_handshake(user)
    print(user)
    if trade_uuid then
        Net:WaitForChild("RE/EquipItem"):FireServer(trade_uuid, "Fishes")
        task.wait(1)
        Net:WaitForChild("RF/InitiateTrade"):InvokeServer(user, trade_uuid)
    end
end

reloadBtn.MouseButton1Click:Connect(function()
    update_inventory()
end)
-- === PLAYER MANAGEMENT ===

--//ANCHOR trade map
local function trade_map(target, jumlah, type)
    local completed = false
    startscript = tick()
    start_timer = true
    Net:WaitForChild("RE/TextNotification").OnClientEvent:Connect(
        function(data)
            print("ADA NOTIF: ", data.Text)
            if data and data.Text == "Trade completed!" then
                completed = true
            end
        end
    )
    local pos, err = getPositionByName(target)
    if pos then
        print("Posisi sekarang:", pos)
        local x = pos.X
        local y = pos.Y
        local z = pos.Z
        teleport(x,y,z)
        task.wait(5)
    end

    update_inventory()
    local custom_list = nil
    local flag_secret = false
    local flag_stone = false
    local limit_stone = 0
    if type then
        if type == "secret" then
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            custom_list = list_sekret_all
            flag_secret = true

        elseif type == "mitik_all" then
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            custom_list = list_mitik_all
        elseif type == "mitik_big" then
            
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            custom_list = list_mitik_big

        elseif type == "mitik_small" then
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            custom_list = list_mitik_small

        elseif type == "stone" then
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            flag_secret = true
            flag_stone = true
            custom_list = stone_uuid
            limit_stone = stone_jumlah

        elseif type == "evolved" then
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            flag_secret = true
            flag_stone = true
            limit_stone = evolved_jumlah
            custom_list = evolved_uuid

        elseif type == "fav" then
            printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
            flag_secret = true
            custom_list = list_fav

        elseif type == "master" then
            if target == "hayfish96" or target == "hayati_lelah7" then
                printer = "Trade "..type.."  ke " .. target .. " sejumlah " .. jumlah
                flag_secret = true
                custom_list = list_master
            else
                pesan("MASTER SALAH")
                return
            end
        else
            pesan("tidak ada pilihan trade")
            return
        end
    end
    pesan(printer)
    local berhasil = 0
    local info_akhir = ""
    local current_harga = 0
    local uuid = ""
    local function trade_user(usr)
        print("Player ditemukan:", usr.Name, "UserId:", usr.UserId)
        if custom_list ~= nil then
            local map_i = 0
            local info
            while true do
                if flag_stone then
                    if limit_stone < jumlah then
                        pesan("jumlah stone lebih sedikit dari pada set")
                        return
                    end
                    uuid = custom_list
                else
                    info = custom_list[map_i]
                    if info == nil then
                        pesan("ikan sudah habis")
                        break
                    end
                    uuid = info.uuid
                end
                Net:WaitForChild("RE/EquipItem"):FireServer(uuid, "Fishes")
                Net:WaitForChild("RF/InitiateTrade"):InvokeServer(usr.UserId, uuid)
                local timeout = 0
                while completed ~= true do
                    print("wait")
                    timeout = timeout + 1
                    if timeout > 30 then
                        print("timeout lebih dari 15 detik")
                        break
                    end
                    task.wait(0.4)
                end
                if timeout < 30 then
                    berhasil = berhasil + 1
                    map_i = map_i + 1
                    info_akhir = "Total: " .. berhasil
                    local info_ikan = "-"
                    if flag_stone then
                        info_ikan = berhasil .. ". Stone success Traded."
                    else
                        current_harga = current_harga  + info.harga
                        local current_mutasi = info.mutasi or "-"
                        info_ikan = berhasil ..". SEND " .. info.nama .. " (" .. info.berat .. " kg) " .. current_mutasi
                        detail_harga.Text = info_akhir .." | $ ".. konvert_harga(current_harga)
                        simpan_transaksi(current_harga)
                    end
                    pesan(info_ikan)
                    printer = printer .. "\n".. info_ikan
                end
                completed = false
                local mm = current_harga / 1000000
                local limit = round(mm, 2)
                if flag_secret == true then
                    if berhasil >= jumlah then
                        pesan("total transaksi tercapai: " .. tostring(jumlah))
                        break
                    end
                else
                    if jumlah > 0 and limit > jumlah then
                        pesan("jumlah tercapai ! " .. konvert_harga(current_harga))
                        break
                    end
                end
                if trade_stop == true then
                    pesan("! TRADE STOPED !")
                    break
                end
                start_timer = false
                task.wait(5)
            end
        else
            pesan("tidak ada barang lagi")
        end
        pesan("SELESAI SEMUA " .. info_akhir)
        update_inventory()
    end
    local existing = Players:FindFirstChild(target)
    if existing then
        trade_user(existing)
    else
        pesan("player tidak ada")
    end
end
--//ANCHOR Button
shopBtn.MouseButton1Click:Connect(function()
    teleport(52, 17, 2868)
end)

local toogle_right_frame = false
showBtn.MouseButton1Click:Connect(function()
    if toogle_right_frame then
        rightFrame.Visible = true
        mainFrame.BackgroundTransparency = 0
        toogle_right_frame = false
    else
        rightFrame.Visible = false
        mainFrame.BackgroundTransparency = 1
        toogle_right_frame = true
    end
end)

stopBtn.MouseButton1Click:Connect(function()
	trade_stop = not trade_stop
    if trade_stop then
        stopBtn.BackgroundColor3 = Color3.fromRGB(109, 0, 0)
        pesan("trade stopped ON")
    else
        stopBtn.BackgroundColor3 = Color3.fromRGB(243, 6, 6)
        pesan("trade stopped OFF")
    end
end)

-- Klik toggle


local function updateButton()
	if settings.auto_trade then
		settingBtn.Text = "Collect: ON"
		settingBtn.BackgroundColor3 = Color3.fromRGB(74, 158, 74)
	else
		settingBtn.Text = "Collect: OFF"
		settingBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
	end
end

-- Klik toggle
settingBtn.MouseButton1Click:Connect(function()
	settings.auto_trade = not settings.auto_trade
	updateButton()
	saveSettings()
end)

renderBtn.MouseButton1Click:Connect(function()
    render()
end)
dumpBtn.MouseButton1Click:Connect(function()
    for nama, jumlah in pairs(list_all) do
        pesan(nama .. " : " .. jumlah)
    end
end)
printBtn.MouseButton1Click:Connect(function()
    if setclipboard then
        setclipboard(printer)
        task.wait(1.5)
        pesan("berhasil copy to clipboard")
    else
        pesan("gagal copy ")
    end
end)

--//ANCHOR TRADE
local function trade(tipe)
    dropdownFrame.Visible = false
    update_inventory()
    if tipe == "fav" then
        pesan("total: " .. #list_fav)
    end
    if not selectedPlayer then
		pesan("‚ùå Pilih player dulu!")
		return
	end
	local jumlah = tonumber(amountBox.Text)
    if tipe == "master" then
        jumlah = 999
    end
	if not jumlah or jumlah <= 0 then
		pesan("‚ùå Masukkan jumlah valid!")
		return
	end
    pesan("trade to " .. selectedPlayer .. " | " .. tipe .. " start in:")
    for i = 1, 5 do
        pesan(i)
        task.wait(2)
    end
    if not running then
        print("CLOSED NOT RUNNING")
        return
    end
	trade_map(selectedPlayer, jumlah, tipe)
end
    -- === Jalankan load saat awal ===
updateButton()
-- Tes awal

--//ANCHOR client invoke
pesan("Collector GUI loaded.")
--[[
if total_transaksi and total_transaksi ~= 0 then
    detail_harga.Text = "Load Trade: " .. konvert_harga(total_transaksi)
end
--]]
local total_ikan = 1
local total_batu = 1


update_inventory()

--//ANCHOR Auto collecting
local function auto_collecting(nama)
    pesan("start auto collect")
    if nama then
        local pos, err = getPositionByName(nama)
        if pos then
            print("Posisi sekarang:", pos)
            local x = pos.X
            local y = pos.Y
            local z = pos.Z
            teleport(x,y,z)
            task.wait(5)
            local existing = Players:FindFirstChild(nama)
            if existing then
                pesan("kirim handshake")
                send_handshake(existing.UserId)
            else
                print("player tidak ada")
            end
        end
    end
end




local function createPlayerButton(name)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, -10, 0, 30)
	btn.BackgroundColor3 = Color3.fromRGB(70, 100, 150)
	btn.Text = name
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.RobotoMono
	btn.TextSize = 16
	btn.Parent = listScroll

	btn.MouseButton1Click:Connect(function()
		if selectedPlayer == name then
			selectedPlayer = nil
			btn.BackgroundColor3 = Color3.fromRGB(70, 100, 150)
			selectedLabel.Text = "Player: -"
		else
			selectedPlayer = name
			selectedLabel.Text = name
			btn.BackgroundColor3 = Color3.fromRGB(200, 80, 80)
			pesan("Selected: " .. name)
            local pos, err = getPositionByName(name)
            if pos then
                print("Posisi sekarang:", pos)
                local x = pos.X
                local y = pos.Y
                local z = pos.Z
                teleport(x,y,z)
                task.wait(5)
            end
		end
	end)
end

for _, p in ipairs(Players:GetPlayers()) do
	if p ~= player then
		createPlayerButton(p.Name)
	end
end

Players.PlayerAdded:Connect(function(p)
	if p ~= player then
		createPlayerButton(p.Name)
		pesan(p.Name .. " joined")
	end
end)

Players.PlayerRemoving:Connect(function(p)
	for _, btn in ipairs(listScroll:GetChildren()) do
		if btn:IsA("TextButton") and btn.Text == p.Name then
			btn:Destroy()
		end
	end
	if selectedPlayer == p.Name then
		selectedPlayer = nil
		selectedLabel.Text = "Selected Player: -"
	end
	pesan(p.Name .. " left")
end)

local function waiting(user)
    print("start waiting")
    local posisi_awal, error1 = getPositionByName(user)
    if not posisi_awal then
        warn(error1)
        return
    end
    local count = 1
    while true do
        local pos, error2 = getPositionByName(user)
        if not pos then
            warn(error2)
            return
        end

        -- hitung perbedaan posisi
        local distance = (pos - posisi_awal).Magnitude

        if distance < 0.5 then
            print("menunggu...")
        else
            print("posisi sudah berubah, selisih:", distance)
            pesan("Selesai")
            return
        end
        if count > 30 then
            return
        end
        count = count + 1
        task.wait(15)
    end
end

Handshake.MouseButton1Click:Connect(function()
    pesan("select handshake to " .. selectedPlayer)
    local existing = Players:FindFirstChild(selectedPlayer)
    if existing then
        pesan("kirim handshake")
        send_handshake(existing.UserId)
        waiting(existing.UserId)
    else
        print("player tidak ada")
    end

end)

--//ANCHOR main
if fav_item then
    pesan("set fav: " .. list_ikan[fav_item].nama)
end

local function put_totem()
    local list = list_totem_mutasi
    if #list > 0 then
        local totem_id = nil
        for _,item in ipairs(list) do
            totem_id = item
            break
        end
        if totem_id then
            pesan("PUT TOTEM: " .. totem_id)
            Net:WaitForChild("RE/EquipItem"):FireServer(totem_id, "Totems")
            task.wait(1)
            Net:WaitForChild("RE/SpawnTotem"):FireServer(totem_id)
            pesan("spawn totem berhasil")
        end
    else
        pesan("TOTEM OFF / HABIS")
    end
end
--//ANCHOR OPSI FUNCTION

function opsi(index)
    if index == 1 then -- ROW I
        trade("mitik_all")
    elseif index == 2 then
       trade("mitik_big")
    elseif index == 3 then
        trade("mitik_small")
    elseif index == 4 then
        pesan("total: " .. tostring(stone_jumlah))
        trade("stone")
    elseif index == 5 then
        pesan("total: " .. tostring(evolved_jumlah))
        trade("evolved")
    elseif index == 6 then
         fav_item = 283
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 7 then
        fav_item = 218 -- thin
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 8 then
        fav_item = 136 -- frostborn
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 9 then
        fav_item = 379 -- glider
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 10 then
        fav_item = 225 -- scare
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 11 then
        fav_item = 82 -- blob
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 12 then
        fav_item = tonumber(customId.Text)
        pesan("set fav: " .. list_ikan[fav_item].nama)
        pesan("Total fav: " .. #list_fav)
        trade("fav")
    elseif index == 13 then
        for id, ikan in pairs(list_ikan) do
            if ikan.tier == "SECRET" then
                print(ikan.nama, ikan.harga, ikan.tier, ikan.id)
                pesan(ikan.nama .." > " .. tostring(ikan.id))
            end
        end
    elseif index == 14 then
        
        trade("master")
    elseif index == 15 then
        
        collector_done(SERVER_URL)
    elseif index == 16 then
        fav_item = 339 -- scare
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 17 then
        fav_item = 359 -- scare
        pesan("set fav: " .. list_ikan[fav_item].nama)
        trade("fav")
    elseif index == 18 then
        pesan("PUT TOTEM")
        update_inventory()
        put_totem()
        pesan("PUT TOTEM berhasil")
    elseif index == 19 then
        teleport(-2103, -91, 3650)
    elseif index == 20 then
        teleport(-2142, 11, 3744)
    elseif index == 21 then
        teleport(-2042, 112, 3736)
    elseif index == 22 then
        teleport(-2042, 11, 3736)
    elseif index == 23 then
        teleport(-2142, -89, 3744)
    elseif index == 24 then
        teleport(-2102, 113, 3651)
    elseif index == 25 then
        local posisi = tonumber(amountBox.Text)
        face(posisi)
    end
end
local countdown = 5
pesan("Auto Play in: ")
if running then
    for i = 1, countdown do
        local elapsed = countdown - i
        pesan(elapsed)
        task.wait(1)
    end
end
--//ANCHOR auto collect user
local RF = Net:WaitForChild("RF/AwaitTradeResponse")
RF.OnClientInvoke = function(...)
    local args = {...}
    local data = args[2]
    local detail = " "
    if data.Id == 10 or data.Id == 558 then
        detail = total_batu .. ". GET stone"
        total_batu = total_batu + 1
    elseif list_ikan[data.Id] then
        local nama = list_ikan[data.Id].nama or "no name"
        local tier = get_tier(list_ikan[data.Id].tier) or "[-]"
        detail = total_ikan ..". GET ".. tier .." | ".. nama
        total_ikan = total_ikan + 1
    end
    update_inventory()
    pesan(detail)
    task.wait(3)
    return "OK"
end

if auto_collect then
    if running then
        if #Players:GetPlayers() > 20 then
            pesan("PLAYER LEBIH DARI 6")
        else
            if trade_uuid then
                pesan("trade sudah siap")
                render()
                for _, user in ipairs(Players:GetPlayers()) do
                    if user ~= player then
                        print("select player", user.Name)
                        selectedLabel.Text = user.Name
                        auto_collecting(user.Name)
                        waiting(user.Name)
                    end
                end
            else
                pesan("ikan trade viperfish kosong")
            end
        end
        pesan("SELESAI SEMUA AUTO COLLECT")
        mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        collector_done(SERVER_URL)
    end
end
local total_trade = 0
if running then 
    Net:WaitForChild("RE/TextNotification").OnClientEvent:Connect(
        function(data)
            if data and data.Text == "Trade completed!" then
                total_trade = total_trade + 1
                local info = "Total : " .. tostring(total_trade)
                --simpan_transaksi(total_trade)
                detail_harga.Text = info
            end
        end
    )
end
--SetLowGraphics()
while running do
    if start_timer then
        running_time = formatTime(math.floor(tick() - startscript))
        selectedLabel.Text = running_time
        task.wait(1)
    else
        task.wait(50)
    end
end
