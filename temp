local Players = game:GetService("Players")
local player = Players.LocalPlayer

local function teleport(x, y, z)
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if root then
        root.CFrame = CFrame.new(Vector3.new(x, y, z))
        print("âœ… Teleported to", x, y, z)
    end
end
teleport(5749,-905,15392)
task.wait(5)
-- ====== GET CRYSTALS ======
local function getCrystalChildren()
    local islands = workspace:FindFirstChild("Islands")
    if not islands then return {} end

    local island = islands:FindFirstChild("Crystal Depths")
    if not island then return {} end

    local crystals = island:FindFirstChild("Crystals")
    if not crystals then return {} end

    local result = {}
    for _, v in ipairs(crystals:GetChildren()) do
        if v:IsA("MeshPart") then
            table.insert(result, v)
        end
    end
    return result
end

local function printProximityInfo(crystal)
    local prompt =
        crystal:FindFirstChildOfClass("ProximityPrompt")
        or crystal:FindFirstChildWhichIsA("ProximityPrompt", true)

    if prompt and prompt.Enabled then
        fireproximityprompt(prompt, 0)   -- press
        task.wait(2)
        fireproximityprompt(prompt, 1)
        print("Triggered:", prompt.ActionText, prompt.ObjectText)
    else
        print("Prompt tidak aktif / tidak ada")
    end
end

local crystals = getCrystalChildren()
if #crystals == 0 then return end

-- ====== PLAYER ======
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid")

local currentIndex = 1

local function teleportTo(index)
    local v = crystals[index]
    if not v then return end

    hum:ChangeState(Enum.HumanoidStateType.Physics)
    hrp.CFrame = v.CFrame + Vector3.new(0, 6, 0)
    task.wait(0.1)
    hum:ChangeState(Enum.HumanoidStateType.Running)

    print("Teleport ke:", v.Name, "Index:", index)

    -- ðŸ”¥ CETAK INFO PROXIMITY PROMPT
    printProximityInfo(v)
end

teleportTo(currentIndex)

-- ====== GUI ======
local gui = Instance.new("ScreenGui")
gui.Name = "CrystalNavigator"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.fromScale(0.25, 0.15)
frame.Position = UDim2.fromScale(0.5, 0.8)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local function makeButton(text, pos)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.fromScale(0.28, 0.5)
    btn.Position = pos
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Parent = frame
    return btn
end

local backBtn = makeButton("â—€ BACK", UDim2.fromScale(0.03, 0.25))
local nextBtn = makeButton("NEXT â–¶", UDim2.fromScale(0.36, 0.25))
local closeBtn = makeButton("X", UDim2.fromScale(0.7, 0.25))
closeBtn.Size = UDim2.fromScale(0.25, 0.5)
closeBtn.BackgroundColor3 = Color3.fromRGB(120, 30, 30)

-- ====== BUTTON LOGIC ======
nextBtn.MouseButton1Click:Connect(function()
    currentIndex = currentIndex + 1
    if currentIndex > #crystals then
        currentIndex = 1
    end
    teleportTo(currentIndex)
end)

backBtn.MouseButton1Click:Connect(function()
    currentIndex = currentIndex - 1
    if currentIndex < 1 then
        currentIndex = #crystals
    end
    teleportTo(currentIndex)
end)

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)
